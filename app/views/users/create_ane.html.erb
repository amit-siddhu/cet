<body>
	<% provide(:title, 'Create-ANE') %>
	<!-- Status bar -->
	<div id="status-bar"><div class="container_12">
	
		<ul id="status-infos" style="margin-top:15px;">
			<li class="spaced" style="margin-top:4px;">Logged as: <strong><%= session[:email] %></strong></li>			
			<li><a href="/logout" class="button red" title="Logout"><span class="smaller">LOGOUT</span></a></li>
		</ul>
		
		<!-- v1.5: you can now add class red to the breadcrumb -->
		<ul id="breadcrumb" style="margin-top:15px;">
			<li><a href="#" title="Home">Home</a></li>
			<li><a href="/dashboard" title="Dashboard">Dashboard</a></li>
			<li><a href="#" title="Create Access Network Element">Create Access Network Element</a></li>
		</ul>
	
	</div></div>
	<!-- End status bar -->
	
	<div id="header-shadow"></div>


<!-- the 'special-page' class is only an identifier for scripts -->
<!--body class="special-page login-bg dark"-->

	<section id="ane-block" style="width:400px; margin-top:150px; margin-left:475px;">
		<div class="block-border"><div class="block-content">
			
			<!--
			IE7 compatibility: if you want to remove the <h1>, 
			add style="zoom:1" to the above .block-content div
			-->
			<div class="block-header">Create ANE</div>
			<script type="text/javascript">
			$("#widget_circle").subSelectWithAjax();
			</script>

			<%= form_for(@ane, html: {class: "form with-margin", name: "ane-form", id: "ane-form"}, :url => {:action => :ane_created}) do |f| %>


			<p class="inline-small-label" style: "margin-bottom:20px;" >
				<%= f.label :circle %>				
				<%= f.collection_select :circle, @circle, :name, :name, include_blank: true %>			
			</p>
			<br>
			<div id="ane_cne">

			</div>
			<br>
			<p class="inline-small-label">
				<%= f.label :ane_name %>
				<%= f.text_field :name, id: "ane_name", class: "full-width", value: "", style: "margin-bottom:20px;" %>
			</p>
			<p class="inline-small-label">
				<%= f.label :ane_ID %>
				<%= f.text_field :ane_id, id: "ane_id", class: "full-width", value: "", style: "margin-bottom:20px;" %>
			</p>
			<p class="inline-small-label">
				<%= f.label :location %>
				<%= f.text_field :location, id: "ane_location", class: "full-width", value: "", style: "margin-bottom:20px;" %>
			</p>
			<p class="inline-small-label">
				<%= f.label :incharge_name %>
				<%= f.text_field :incharge_name, id: "ane_incharge_name", class: "full-width", value: "", style: "margin-bottom:20px;" %>
			</p>
			<p class="inline-small-label">
				<%= f.label :incharge_phone %>
				<%= f.text_field :incharge_contact, id: "ane_incharge_contact_no", class: "full-width", value: "", style: "margin-bottom:20px;" %>
			</p>
			<p class="inline-small-label">
				<%= f.label :incharge_email %>
				<%= f.email_field :incharge_email, id: "ane_incharge_email", class: "full-width", value: "", style: "margin-bottom:20px;" %>
			</p>
			<%= f.button :Create, class: "float-right" %>
			<% end %>

				
			<!--form class="form with-margin" name="login-form" id="login-form" method="post" action="">
				<input type="hidden" name="a" id="a" value="send">
				<p class="inline-small-label">
					<label for="login"><span class="big" style="font-size:15px;">ANE Name</span></label>
					<input type="text" name="name" id="login" class="full-width" value="">
				</p>
				<p class="inline-small-label">
					<label for="pass"><span class="big" style="font-size:15px;">ANE ID</span></label>
					<input type="text" name="admin" id="email" class="full-width" value="">
				</p>
                <p class="inline-small-label">
					<label for="pass"><span class="big" style="font-size:15px;">Location</span></label>
					<input type="text" name="admin" id="email" class="full-width" value="">
				</p>
                <p class="inline-small-label">
					<label for="pass"><span class="big" style="font-size:15px;">ANE Incharge Name</span></label>
					<input type="text" name="admin" id="email" class="full-width" value="">
				</p>
                <p class="inline-small-label">
					<label for="pass"><span class="big" style="font-size:15px;">ANE Incharge Contact No.</span></label>
					<input type="text" name="admin" id="email" class="full-width" value="">
				</p>
                <p class="inline-small-label">
					<label for="pass"><span class="big" style="font-size:15px;">ANE Incharge email</span></label>
					<input type="text" name="admin" id="email" class="full-width" value="">
				</p>			
				<button type="submit" class="float-right">Create</button>
                                <p class="input-height">

                                </p>
			</form-->
			
		</div></div>
	</section>
	
	<!--
	
	Updated as v1.5:
	Libs are moved here to improve performance
	
	-->
	
	<!-- Generic libs -->
	<script src="js/libs/jquery-1.6.3.min.js"></script>
	<script src="js/old-browsers.js"></script>		<!-- remove if you do not need older browsers detection -->
	
	<!-- Template libs -->
	<script src="js/common.js"></script>
	<script src="js/standard.js"></script>
	<!--[if lte IE 8]><script src="js/standard.ie.js"></script><![endif]-->
	<script src="js/jquery.tip.js"></script>
	
	<!-- example login script -->
	<script>
	
		$(document).ready(function()
		{
			// We'll catch form submission to do it in AJAX, but this works also with JS disabled
			$('#ane-form').submit(function(event)
			{
				// Stop full page load
				//event.preventDefault();
				
				// Check fields
				var ane_circle = $('#ane_circle').val();
				var ane_name = $('#ane_name').val();
				var ane_id = $('#ane_id').val();
				var ane_location = $('#ane_location').val();
				var ane_incharge_name = $('#ane_incharge_name').val();
				var ane_incharge_contact_no = $('#ane_incharge_contact_no').val();
				var ane_incharge_email = $('#ane_incharge_email').val();
				
				

				if (!ane_circle || ane_circle.length == 0)
				{
					$('#ane-block').removeBlockMessages().blockMessage('Please Select a Circle', {type: 'warning'});
					return false;
				}
				else if (!ane_name || ane_name.length == 0)
				{
					$('#ane-block').removeBlockMessages().blockMessage('Please enter ANE name', {type: 'warning'});
					return false;
				}
				else if (!ane_id || ane_id.length == 0)
				{
					$('#ane-block').removeBlockMessages().blockMessage('Please enter ANE ID', {type: 'warning'});
					return false;
				}
				else if (!ane_location || ane_location.length == 0)
				{
					$('#ane-block').removeBlockMessages().blockMessage('Please enter ANE Location', {type: 'warning'});
					return false;
				}
				else if (!ane_incharge_name || ane_incharge_name.length == 0)
				{
					$('#ane-block').removeBlockMessages().blockMessage('Please enter ANE Incharge name', {type: 'warning'});
					return false;
				}
				else if (!ane_incharge_contact_no || ane_incharge_contact_no.length == 0)
				{
					$('#ane-block').removeBlockMessages().blockMessage('Please enter Incharge Contact number', {type: 'warning'});
					return false;
				}
				else if (!ane_incharge_email || ane_incharge_email.length == 0)
				{
					$('#ane-block').removeBlockMessages().blockMessage('Please enter ANE Incharge email', {type: 'warning'});
					return false;
				}
				
				/*else
				{
					var submitBt = $(this).find('button[type=submit]');
					submitBt.disableBt();
					
					// Target url
					var target = $(this).attr('action');
					if (!target || target == '')
					{
						// Page url without hash
						target = document.location.href.match(/^([^#]+)/)[1];
					}
					
					// Request
					var data = {
							a: $('#a').val(),
							login: login,
							pass: pass,
							'keep-logged': $('#keep-logged').attr('checked') ? 1 : 0
						},
						redirect = $('#redirect'),
						sendTimer = new Date().getTime();
					
					if (redirect.length > 0)
					{
						data.redirect = redirect.val();
					}
					
					// Send
					$.ajax({
						url: target,
						dataType: 'json',
						type: 'POST',
						data: data,
						success: function(data, textStatus, XMLHttpRequest)
						{
							if (data.valid)
							{
								// Small timer to allow the 'cheking login' message to show when server is too fast
								var receiveTimer = new Date().getTime();
								if (receiveTimer-sendTimer < 500)
								{
									setTimeout(function()
									{
										document.location.href = data.redirect;
										
									}, 500-(receiveTimer-sendTimer));
								}
								else
								{
									document.location.href = data.redirect;
								}
							}
							else
							{
								// Message
								$('#login-block').removeBlockMessages().blockMessage(data.error || 'An unexpected error occured, please try again', {type: 'error'});
								
								submitBt.enableBt();
							}
						},
						error: function(XMLHttpRequest, textStatus, errorThrown)
						{
							// Message
							$('#login-block').removeBlockMessages().blockMessage('Error while contacting server, please try again', {type: 'error'});
							
							submitBt.enableBt();
						}
					});
					
					// Message
					$('#login-block').removeBlockMessages().blockMessage('Please wait, cheking login...', {type: 'loading'});
				}*/
			});
		});
	



$("#ane_circle").change(function(){
  $.get("/cne_by_circle?circle="+$("#ane_circle").val(), 
        function(data){ $("#ane_cne").html(data); } );
});



	</script>

	</body>