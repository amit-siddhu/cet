<body  class="special-page login-bg dark">
<% provide(:title, 'Reset-Password') %>
<!--p id="notice" style="text-align:center;margin-top:50px"><%= notice %></p-->
<section id="passreset-block">
		<div class="block-border"><div class="block-content">
			
			<!--
			IE7 compatibility: if you want to remove the <h1>, 
			add style="zoom:1" to the above .block-content div
			-->
			<!--div class="block-header">Registration</div-->
			<div class="block-header">Reset Password</div>
			<!--
			<%#= form_for(@confirm_user, html: {class: "form with-margin", id: "signup-form"}) do |f| %>
			<p class="inline-small-label">
			<%#= f.label :organization  %>
			<%#= f.text_field :company_name, id: "organization", class: "full-width", value: "", required: "required", style: "margin-bottom:20px;" %>
			</p>
			<p class="inline-small-label">
				<#%= f.label :email %>
				<#%= f.email_field :email, id: "email", class: "full-width", value: "", required: "required", style: "margin-bottom:20px;"%>
			</p>
			<%#= f.button "Register", class: "float-right", type: "submit" %>

			<%# end %>
				-->

			<form class="form with-margin" name="passreset-form" id="passreset-form" method="post" action="users/passreset">
				<!--input type="hidden" name="a" id="a" value="send"-->
				<p class="inline-small-label">
					<label for="newpass"><!--span class="big"-->New password<!--/span--></label>
					<input type="password" name="newpass" id="newpass" class="full-width" value="" style="margin-bottom:20px;" required>         
				</p>
				<p class="inline-small-label">
					<label for="confirmpass"><!--span class="big"-->Confirm password<!--/span--></label>
					<input type="password" name="confirmpass" id="confirmpass" class="full-width" value="" style="margin-bottom:20px;" required>
				</p>
				
				<button type="submit" class="float-right">Submit</button>
                                <p class="input-height">

                                </p>
			</form>
			
		</div></div>
	</section>
	
	<!--
	
	Updated as v1.5:
	Libs are moved here to improve performance
	
	-->
	
	<!-- Generic libs -->
	<!--script src="js/libs/jquery-1.6.3.min.js"></script>
	<script src="js/old-browsers.js"></script-->		<!-- remove if you do not need older browsers detection -->
	
	<!-- Template libs -->
	<!--script src="js/common.js"></script>
	<script src="js/standard.js"></script-->
	<!--[if lte IE 8]><script src="js/standard.ie.js"></script><![endif]-->
	<!--script src="js/jquery.tip.js"></script-->
	
	<!-- example login script -->
	<script>
	
		$(document).ready(function()
		{
			// We'll catch form submission to do it in AJAX, but this works also with JS disabled
			$('#passreset-form').submit(function(event)
			{
				// Stop full page load
				//event.preventDefault();
				
				// Check fields
				var newpass = $('#newpass').val();
				var confirmpass = $('#confirmpass').val();
				
				if (!newpass || newpass.length == 0)
				{
					$('#passreset-block').removeBlockMessages().blockMessage('Please enter your new password.', {type: 'warning'});
					return false;
				}
				else if (!confirmpass || confirmpass.length == 0)
				{
					$('#passreset-block').removeBlockMessages().blockMessage('Please confirm your password.', {type: 'warning'});
					return false;
				}
				else if (newpass != confirmpass)
				{
					$('#passreset-block').removeBlockMessages().blockMessage('Password mismatch.', {type: 'error'});
					return false;
				}
				else
				{
					return true;
					/*var submitBt = $(this).find('button[type=submit]');
					submitBt.disableBt();
					
					// Target url
					var target = $(this).attr('action');
					if (!target || target == '')
					{
						// Page url without hash
						target = document.location.href.match(/^([^#]+)/)[1];
					}
					
					// Request
					var data = {
							a: $('#a').val(),
							login: login,
							pass: pass,
							'keep-logged': $('#keep-logged').attr('checked') ? 1 : 0
						},
						redirect = $('#redirect'),
						sendTimer = new Date().getTime();
					
					if (redirect.length > 0)
					{
						data.redirect = redirect.val();
					}
					
					// Send
					$.ajax({
						url: target,
						dataType: 'json',
						type: 'POST',
						data: data,
						success: function(data, textStatus, XMLHttpRequest)
						{
							if (data.valid)
							{
								// Small timer to allow the 'cheking login' message to show when server is too fast
								var receiveTimer = new Date().getTime();
								if (receiveTimer-sendTimer < 500)
								{
									setTimeout(function()
									{
										document.location.href = data.redirect;
										
									}, 500-(receiveTimer-sendTimer));
								}
								else
								{
									document.location.href = data.redirect;
								}
							}
							else
							{
								// Message
								$('#login-block').removeBlockMessages().blockMessage(data.error || 'An unexpected error occured, please try again', {type: 'error'});
								
								submitBt.enableBt();
							}
						},
						error: function(XMLHttpRequest, textStatus, errorThrown)
						{
							// Message
							$('#login-block').removeBlockMessages().blockMessage('Error while contacting server, please try again', {type: 'error'});
							
							submitBt.enableBt();
						}
					});
					
					// Message
					$('#login-block').removeBlockMessages().blockMessage('Please wait, cheking login...', {type: 'loading'});
					*/				
				}
			});
		});
	
	</script>
</body>